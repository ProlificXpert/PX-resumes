<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Upload Resume — ProlificXpert</title>

<style>
:root{
  --blue:#007BFF;
  --green:#28a745;
  --grad1:#0ea5a4;
  --grad2:#007BFF;
  --card:#fff;
  --muted:#6b7280;
  --radius:14px;
}

*{box-sizing:border-box;}

body{
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  margin:0;
  padding:20px;
  background:linear-gradient(180deg,#f4f8ff 0%,#fff 60%);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  color:#0f172a;
}

.stage{width:100%;max-width:900px;margin:auto;}

.hero{text-align:center;margin-bottom:20px;}
.hero h1{
  margin:0;
  font-size:28px;
  font-weight:800;
  background:linear-gradient(90deg,var(--grad1),var(--grad2));
  -webkit-background-clip:text;
  color:transparent;
}
.hero p{margin-top:8px;font-size:14px;color:var(--muted);}

/* Card */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:26px;
  box-shadow:0 12px 40px rgba(0,0,0,.08);
  border-top:6px solid;
  border-image:linear-gradient(90deg,var(--grad1),var(--grad2)) 1;
}

/* Form Grid */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px 18px;}
.full{grid-column:1/-1;}
.section-title{
  grid-column:1/-1;
  font-size:15px;
  font-weight:700;
  margin:6px 0 8px;
}

/* Inputs */
.field label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
  font-size:14px;
  color:#0b6f4a;
}
.input-wrap{
  display:flex;
  align-items:center;
  background:#fbfbff;
  border:1px solid #e6e9ef;
  padding:12px;
  border-radius:10px;
}
.input-wrap input{
  flex:1;
  border:none;
  outline:none;
  font-size:16px;
  background:transparent;
}
.input-wrap:focus-within{
  border-color:var(--blue);
  box-shadow:0 6px 20px rgba(2,132,199,.15);
}

/* File Preview */
.file-preview{
  margin-top:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#f9fffb;
  border:1px dashed #d6e8d9;
  padding:12px;
  border-radius:10px;
}
.file-preview small{color:var(--muted);}

/* Button */
.btn{
  width:100%;
  padding:14px;
  border-radius:12px;
  background:linear-gradient(90deg,var(--grad1),var(--grad2));
  color:white;
  font-size:16px;
  font-weight:700;
  border:none;
  cursor:pointer;
}
.btn:disabled{opacity:.7;cursor:not-allowed;}

.spinner{
  width:18px;height:18px;
  border:2px solid rgba(255,255,255,.4);
  border-top-color:#fff;
  border-radius:50%;
  animation:spin .8s linear infinite;
  display:inline-block;
  margin-left:8px;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Modal */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:.2s;
}
.modal-backdrop.show{
  opacity:1;
  pointer-events:auto;
}
.modal{
  background:#fff;
  width:90%;
  max-width:420px;
  padding:22px;
  border-radius:14px;
  text-align:center;
}
.modal h3{margin:0 0 8px;}
.modal p{color:var(--muted);}
.link{
  display:inline-block;
  margin-top:10px;
  padding:10px 14px;
  border-radius:10px;
  background:linear-gradient(90deg,var(--grad1),var(--grad2));
  color:#fff;
  font-weight:700;
  text-decoration:none;
}

/* Responsive */
@media(max-width:820px){
  .grid{grid-template-columns:1fr;}
}
@media(max-width:480px){
  body{padding:12px;}
  .hero h1{font-size:20px;}
  .btn{font-size:15px;padding:12px;}
}
</style>
</head>

<body>
<div class="stage">
  <div class="hero">
    <h1>Upload Your Resume</h1>
    <p>Submit your profile — our team will review and get back to you.</p>
  </div>

  <div class="card">
    <form id="uploadForm">
      <div class="grid">

        <div class="section-title">Personal Info</div>
        <div class="field"><label>Full Name</label><div class="input-wrap"><input id="name" required></div></div>
        <div class="field"><label>Email</label><div class="input-wrap"><input id="email" type="email" required></div></div>
        <div class="field"><label>Phone</label><div class="input-wrap"><input id="phone" required></div></div>
        <div class="field"><label>Location</label><div class="input-wrap"><input id="location" required></div></div>

        <div class="section-title">Experience</div>
        <div class="field"><label>Total Experience</label><div class="input-wrap"><input id="total_experience" type="number" required></div></div>
        <div class="field"><label>Relevant Experience</label><div class="input-wrap"><input id="relevant_experience" type="number" required></div></div>
        <div class="field full"><label>Skills</label><div class="input-wrap"><input id="skills" required></div></div>

        <div class="section-title">Salary</div>
        <div class="field"><label>Current CTC</label><div class="input-wrap"><input id="current_ctc" type="number" required></div></div>
        <div class="field"><label>Expected CTC</label><div class="input-wrap"><input id="expected_ctc" type="number" required></div></div>

        <div class="section-title full">Resume</div>
        <div class="field full">
          <input id="file" type="file" accept=".pdf,.doc,.docx">
          <div id="previewArea"></div>
        </div>

        <div class="full">
          <button class="btn" id="submitBtn">
            Submit Application <span id="spinner" class="spinner" style="display:none"></span>
          </button>
        </div>

      </div>
    </form>
  </div>
</div>

<div id="modal" class="modal-backdrop">
  <div class="modal">
    <h3>Upload Successful</h3>
    <p>Your resume has been uploaded.</p>
    <a id="fileLink" class="link" target="_blank">Open Resume</a><br><br>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<script>
const scriptURL="https://script.google.com/macros/s/AKfycbzQcC3gyhAWTu88aQPvfKg3Ss2O7rv8VWtJU7anBCNsIpbsdyWQBNDJN5uaz0uU8OVyNg/exec";
const form=document.getElementById("uploadForm");
const fileInput=document.getElementById("file");
const preview=document.getElementById("previewArea");
const modal=document.getElementById("modal");
const fileLink=document.getElementById("fileLink");
const spinner=document.getElementById("spinner");
const submitBtn=document.getElementById("submitBtn");

fileInput.onchange=()=>{
  const f=fileInput.files[0];
  if(!f)return;
  if(f.size>5*1024*1024){alert("Max 5MB");fileInput.value="";return;}
  preview.innerHTML=`<div class="file-preview">${f.name} <small>${(f.size/1024/1024).toFixed(2)} MB</small></div>`;
};

form.onsubmit=async e=>{
  e.preventDefault();
  const f=fileInput.files[0];
  if(!f){alert("Attach resume");return;}
  spinner.style.display="inline-block";
  submitBtn.disabled=true;

  const reader=new FileReader();
  reader.onload=async()=>{
    const fd=new FormData();
    fd.append("filename",f.name);
    fd.append("filedata",reader.result.split(",")[1]);
    fd.append("data",JSON.stringify({
      name:name.value,email:email.value,phone:phone.value,location:location.value,
      total_experience:total_experience.value,relevant_experience:relevant_experience.value,
      skills:skills.value,current_ctc:current_ctc.value,expected_ctc:expected_ctc.value
    }));
    const res=await fetch(scriptURL,{method:"POST",body:fd});
    const json=await res.json();
    if(json.status==="success"){fileLink.href=json.fileUrl;modal.classList.add("show");}
    spinner.style.display="none";
    submitBtn.disabled=false;
  };
  reader.readAsDataURL(f);
};

function closeModal(){modal.classList.remove("show");}
</script>

</body>
</html>
